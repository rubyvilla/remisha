<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Midhunâ™¥Remisha</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
   <script>
    const firebaseConfig = {
		apiKey: "AIzaSyAIyz6BsrmsnJBrm2vwDdD2AgLrUTOOgXE",
		authDomain: "remisha-f8e73.firebaseapp.com",
		projectId: "remisha-f8e73",
		storageBucket: "remisha-f8e73.appspot.com",
		messagingSenderId: "914889571540",
		appId: "1:914889571540:web:3e5cac3dab1986664a4f41",
		measurementId: "G-72ZS2XZVSF"
  };


        // Initialize Firebase
	const app = firebase.initializeApp(firebaseConfig);
        const storage = firebase.storage(app);

          // Function to resize image
        function resizeImage(file, width, height) {
            return new Promise((resolve, reject) => {
                const img = document.createElement("img");
                const reader = new FileReader();

                reader.onload = (e) => {
                    img.src = e.target.result;
                };

                img.onload = () => {
                    const canvas = document.createElement("canvas");
                    canvas.width = width;
                    canvas.height = height;
                    const ctx = canvas.getContext("2d");
                    ctx.drawImage(img, 0, 0, width, height);
                    canvas.toBlob((blob) => {
                        resolve(blob);
                    }, file.type);
                };

                img.onerror = (error) => {
                    reject(error);
                };

                reader.readAsDataURL(file);
            });
        }

        // Function to handle file upload
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('uploadButton').onclick = async function() {
                const file = document.getElementById('fileInput').files[0];

                if (!file) {
                    alert("Please select a file to upload.");
                    return;
                }

                try {
                    // Resize the image
                    const resizedBlob = await resizeImage(file, 480, 480);
                    const storageRef = storage.ref('upload/' + file.name);
                    const storagenewRef = storage.ref('image/' + file.name);
                    // Upload the resized image
                    storageRef.put(resizedBlob).then(() => {
                        alert('File uploaded successfully!');
                    }).catch((error) => {
                        console.error('Upload failed:', error);
                        alert('Upload failed: ' + error.message);
                    });
		    storagenewRef.put(file).then(() => {
                        alert('File uploaded successfully!');
                    }).catch((error) => {
                        console.error('Upload failed:', error);
                        alert('Upload failed: ' + error.message);
                    });
                } catch (error) {
                    console.error('Error resizing image:', error);
                    alert('Error resizing image: ' + error.message);
                }
            };
        });
    </script>

</head>
<body>
    <h1>Upload a File</h1>
    <input type="file" id="fileInput" />
    <button id="uploadButton">Upload</button>

	
</body>
</html>
